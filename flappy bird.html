<!DOCTYPE html>
<html>
<head>
	<title>Flappy Bird</title>
</head>
<body>
<h1>Retarded Flappy Bird Game</h1>
<p>Is very retarded and simple. Below is the bar speed box, 10 is the standard if the value is over 800 it will break the game.</p>
<h3><a href="https://djpiper28.github.io/index.html" target="_blank">Home</a></h3>
<textarea id="textbox">10</textarea>
<canvas id="gameCanvas" width="800" height="650"></canvas>

<script>
var canvas;
var canvasContexts;
var birdy;
var birdx = 50;
var FPS = 30;
var tau = Math.PI*2;
var fallspeed = 5;
var bar = 750;
var d = 0;
var score = 0;
var barspeed = 10;
var time = 1/FPS;
var bbar = bar + 750
resetBar();
resetbbar();
document.addEventListener('keydown', input);
document.addEventListener("mousedown", mouse, false);
function input(){
	var x = event.keyCode;
	if(x==32){
		birdy = birdy - 100
		console.log('space was pressed',x)
		fallspeed = 5;
	} 
}
function mouse(){
	birdy = birdy - 100
	console.log('mouse')
	fallspeed = 5;
}
function draw(x,y,width,height,colour){
	canvasContext.fillStyle = colour;
	canvasContext.fillRect(x,y,width,height);
}
function resetBar(){
	bar1y = Math.ceil(Math.floor((Math.random() * 400) + 300)/10)*10;
	bar2y = Math.ceil(Math.floor((Math.random() * 400) + 300)/10)*10;
	bar3y = Math.ceil(Math.floor((Math.random() * 400) + 300)/10)*10;
	bar4y = Math.ceil(Math.floor((Math.random() * 400) + 300)/10)*10;
	bar5y = Math.ceil(Math.floor((Math.random() * 400) + 300)/10)*10;
	if(bar1y<=400){
		bar1y = 400;
	} if(bar2y<=400){
		bar2y = 450;
	} if(bar3y<=400){
		bar3y = 450;
	} if(bar4y<=400){
		bar4y = 400;
	} if(bar5y<=400){
		bar5y = 450;
	} if(bar1y>=600){
		bar1y = 600;
	} if(bar2y>=600){
		bar2y = 650;
	} if(bar3y>=600){
		bar3y = 600;
	} if(bar4y>=600){
		bar4y = 650;
	} if(bar5y>=600){
		bar5y = 600;
	} 
}
function resetbbar(){
	bbar1y = Math.ceil(Math.floor((Math.random() * 400) + 300)/100)*100;
	bbar2y = Math.ceil(Math.floor((Math.random() * 400) + 300)/100)*100;
	bbar3y = Math.ceil(Math.floor((Math.random() * 400) + 300)/100)*100;
	bbar4y = Math.ceil(Math.floor((Math.random() * 400) + 300)/100)*100;
	bbar5y = Math.ceil(Math.floor((Math.random() * 400) + 300)/100)*100;
	if(bbar1y<=300){
		bbar1y = 400;
	} if(bbar2y<=300){
		bbar2y = 450;
	} if(bbar3y<=300){
		bbar3y = 400;
	} if(bbar4y<=300){
		bbar4y = 450;
	} if(bbar5y<=300){
		bbar5y = 400;
	} if(bbar1y>=600){
		bbar1y = 600;
	} if(bbar2y>=600){
		bbar2y = 650;
	} if(bbar3y>=600){
		bbar3y = 600;
	} if(bbar4y>=600){
		bbar4y = 650;
	} if(bbar5y>=600){
		bbar5y = 600;
	} 
}

function dead(){
	birdy = 400;
	console.log('died', fallspeed);
	bar = 800;
	resetBar();
	finalscore = score;
	fallspeed = 5;
	d = 1;
	score = 0;
}
function circle(x,y,radius,colour){
	canvasContext.fillStyle = colour;
	canvasContext.beginPath();
	canvasContext.arc(x,y,radius,0,tau,true)
	canvasContext.fill();
}
function text(textt,sizefont,x,y,colour){
	canvasContext.fillStyle = colour;
	canvasContext.textAlign  = 'centre';
	canvasContext.font = sizefont;
	canvasContext.fillText(textt,x,y);
}
function drawEverything(){
	birdy = birdy + fallspeed
	draw(0,0,canvas.width,canvas.height,'blue')
	draw(0,600,canvas.width,canvas.height,'green')
	circle(800,0,150,'yellow')
	draw(birdx,birdy,10,20,'yellow')
	draw(birdx,birdy,10,10,'white')
	console.log('frame')
	draw(bar,bar1y,50,800,'green')
	draw(bar,0,50,bar1y-200,'green')
	draw(bar+150,bar2y,50,800,'green')
	draw(bar+150,0,50,bar2y-200,'green')
	draw(bar+300,bar3y,50,800,'green')
	draw(bar+300,0,50,bar3y-200,'green')
	draw(bar+450,bar4y,50,800,'green')
	draw(bar+450,0,50,bar4y-200,'green')
	draw(bar+600,bar5y,50,800,'green')
	draw(bar+600,0,50,bar5y-200,'green')
	draw(bbar,bbar1y,50,800,'green')
	draw(bbar,0,50,bbar1y-200,'green')
	draw(bbar+150,bbar2y,50,800,'green')
	draw(bbar+150,0,50,bbar2y-200,'green')
	draw(bbar+300,bbar3y,50,800,'green')
	draw(bbar+300,0,50,bbar3y-200,'green')
	draw(bbar+450,bbar4y,50,800,'green')
	draw(bbar+450,0,50,bbar4y-200,'green')
	draw(bbar+600,bbar5y,50,800,'green')
	draw(bbar+600,0,50,bbar5y-200,'green')
	if(fallspeed>=4){
		fallspeed = fallspeed * 1.02;
	}
	if(d<100&&d!=0){
		draw(0,0,canvas.width,canvas.height,'red')
		d = d + 1;
		birdy = 200;
		fallspeed = 5;
		text(('your Final Score is:',Math.round(finalscore)),'24px Impact', 50,50,'white');
		text('YOU  DIED!','96px Hobo STD',104,325,'white');
		score = 0;
		bar = 700
		bbar = bar + 700
	} else{
		text(Math.round(score), '24px Impact',50,50,'white');
	}
	if(d>101){
		d=0;
	}
	score = score + time;
	if(d=>101||d==0){
		if(bar<=60){
			if(bar>=10){
				if(bar1y+5<=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} if(bar1y-205>=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				}
			}
		} if(bar+150<=60){
			if(bar+155>=10){
				if(bar2y<=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} if(bar2y-205>=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} 
			}
		} if(bar+300<=60){
			if(bar+305>=10){
				if(bar3y<=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} if(bar3y-205>=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} 
			}
		} if(bar+450<=60){
			if(bar+455>=10){
				if(bar4y<=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} if(bar4y-205>=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} 
			}
		} if(bar+600<=60){
			if(bar+605>=10){
				if(bar5y<=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} if(bar5y-205>=birdy){
					dead()
					console.log(bar,bar1y,bar2y,bar3y,bar4y,bar5y,birdy)
				} 
			}
		}
		if(bbar<=60){
			if(bbar>=10){
				if(bbar1y+5<=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} if(bbar1y-205>=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				}
			}
		} if(bbar+150<=60){
			if(bbar+155>=10){
				if(bbar2y<=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} if(bbar2y-205>=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} 
			}
		} if(bbar+300<=60){
			if(bbar+305>=10){
				if(bbar3y<=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} if(bbar3y-205>=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} 
			}
		} if(bbar+450<=60){
			if(bbar+455>=10){
				if(bbar4y<=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} if(bbar4y-205>=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} 
			}
		} if(bbar+600<=60){
			if(bbar+605>=10){
				if(bbar5y<=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} if(bbar5y-205>=birdy){
					dead()
					console.log(bbar,bbar1y,bbar2y,bbar3y,bbar4y,bbar5y,birdy)
				} 
			}
		}
	}
	bar = bar - barspeed;
	bbar = bbar -barspeed;
	if(bar<-700){
		bar = 750;
		resetBar();
	}
	if(bbar<-700){
		bbar = 750;
		resetbbar();
	}
	if(birdy>=600){
		dead();
	}
	barspeed = document.getElementById('textbox').value;
}
window.onload = function(){
	birdy = 400;
	resetBar();
	console.log("Webpage loaded");
	canvas = document.getElementById('gameCanvas');
	canvasContext= canvas.getContext("2d");
	setInterval(drawEverything,1000/FPS);
}
console.log("Code started")
</script>
<p>On the technical side of this game it runs at 30fps and works by drawing coloured shapes each frame. 
When the player hits the top the Y-axis is limited so he can't go any higher giving an illusion of an 
invisible wall, the collisions with the poles are calculated by working out if the X-axis of the poles
is close enough to colide with the 'bird' and then checks if the bird's Y-axis is within a pole. The 
poles are in a group of 5 the height is randomly generated to closest 100 and rendered. No collision 
meshes or boxes are used.</p>
</body>
<p>Copyright (C) Danny Piper 2017
</html>